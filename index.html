<!DOCTYPE html>
<html lang="hy">
<head>
<meta charset="UTF-8">
<title>ีีฒีปีซ ีฃีฅีฟีซ ีปึีซ ีธึีกีฏีซ ีฐีกีดีกีบีกึึีกีฏ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; margin: 0; background: #f4f6f8; }
h2 { text-align: center; margin-top: 25px; color:#0b7285; }
section { background:white; margin:20px; padding:20px; border-radius:8px; }
#map { height: 400px; }
canvas { max-width: 100%; }
.analysis { line-height:1.6; }
</style>
</head>

<body>

<section>
<h2>๐ ีีดีธึีทีกีผีดีกีถ ึีกึีฟีฅีฆ โ ีีฒีปีซ ีฃีฅีฟ</h2>
<div id="map"></div>
</section>

<section>
<h2>๐ ีึีซ ีธึีกีฏีซ ีคีกีฝีฅึีซ ีฃึีกึีซีฏีกีฏีกีถ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</h2>
<canvas id="qualityChart"></canvas>
</section>

<section>
<h2>๐ ีีกีขีกีฉีกีฏีกีถ ีฐีกีดีกีบีกึึีกีฏ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</h2>
<div class="analysis" id="weeklyText"></div>
</section>

<script>
/* =========================
   ีีีิฑิผีิตี (ึึีซีถีกีฏีกีตีซีถ)
========================= */
const samples = [
{
  date:"2025-01-05",
  lat:39.21, lng:46.41,
  Fe:9.05, Cu:0.12, Zn:0.9, Mn:0.42, Al:1.8,
  Ca:85, Li:0.04, Mo:0.03, V:0.07, Pb:0.06
},
{
  date:"2025-01-08",
  lat:39.215, lng:46.415,
  Fe:4.3, Cu:0.08, Zn:0.7, Mn:0.30, Al:1.2,
  Ca:78, Li:0.03, Mo:0.02, V:0.05, Pb:0.04
},
{
  date:"2025-01-12",
  lat:39.22, lng:46.42,
  Fe:1.8, Cu:0.05, Zn:0.5, Mn:0.20, Al:0.8,
  Ca:72, Li:0.02, Mo:0.01, V:0.03, Pb:0.02
}
];

/* =========================
   ีีีิป ิณิตี โ ีีิฑิฟิป ิดิฑีิตี
========================= */
function qualityClass(v){
  if(v<=1) return 1;
  if(v<=2) return 2;
  if(v<=5) return 3;
  if(v<=10) return 4;
  return 5;
}

/* =========================
   ีิฑีีิติถ
========================= */
const map=L.map("map").setView([39.215,46.415],12);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

samples.forEach(s=>{
  L.circleMarker([s.lat,s.lng],{
    radius:8,
    color:"red",
    fillOpacity:0.8
  }).addTo(map)
  .bindPopup(
    `<b>${s.date}</b><br>
     Fe ีคีกีฝี ${qualityClass(s.Fe)}`
  );
});

/* =========================
   ิณีิฑีิปิฟ
========================= */
const elements=["Fe","Cu","Zn","Mn","Al","Ca","Li","Mo","V","Pb"];
const colors=["red","orange","blue","green","purple","brown","teal","pink","gray","black"];

const datasets=elements.map((el,i)=>({
  label:el,
  data:samples.map(s=>qualityClass(s[el])),
  borderColor:colors[i],
  tension:0.3,
  pointRadius:5
}));

new Chart(document.getElementById("qualityChart"),{
  type:"line",
  data:{
    labels:samples.map(s=>s.date),
    datasets:datasets
  },
  options:{
    scales:{
      y:{
        min:1,max:5,
        ticks:{stepSize:1},
        title:{display:true,text:"ีึีซ ีธึีกีฏีซ ีคีกีฝ"}
      }
    }
  }
});

/* =========================
   ีิฑิฒิฑินิฑิฟิฑี ีิตีีีิฑีิปี ีิตีิผีีิพีีินีีีี
========================= */
let text="";
elements.forEach(el=>{
  const avg=samples.reduce((a,b)=>a+qualityClass(b[el]),0)/samples.length;
  text+=`<p><b>${el}</b> ีฟีกึึีซ ีดีซีปีซีถ ีธึีกีฏีซ ีคีกีฝีจ ีฏีกีฆีดีธึีด ีง <b>${avg.toFixed(1)}</b>,
  ีซีถีนีจ ีพีฏีกีตีธึีด ีง ${Math.round(avg)}-ึีค ีคีกีฝีซ ีฃีฅึีกีฏีทีผีธึีฉีตีกีถ ีดีกีฝีซีถ
  ึ ีฏีกึีธีฒ ีง ีฅึีฏีกึีกีชีกีดีฏีฅีฟ ีกีฆีคีฅึีธึีฉีตีธึีถ ีธึีถีฅีถีกีฌ ีฃีฅีฟีซ ีงีฏีธีฐีกีดีกีฏีกึีฃีซ ีพึีกึ</p>`;
});

document.getElementById("weeklyText").innerHTML=
`<p>05โ12.01.2025 ีชีกีดีกีถีกีฏีกีฐีกีฟีพีกีฎีธึีด ีีฒีปีซ ีฃีฅีฟีซ ีปึีซ ีธึีกีฏีซ ีฐีกีดีกีบีกึึีกีฏ ีฃีถีกีฐีกีฟีธึีดีจ ึีธึีตึ ีง ีฟีกีฌีซีฝ,
ีธึ ีดีฅีฟีกีฒีถีฅึีซ ีดีฅีฎ ีดีกีฝีจ ีคีกีฝีพีธึีด ีง <b>IIIโV ีธึีกีฏีซ ีคีกีฝีฅึีซ</b> ีดีซีปีกีฏีกีตึีธึีดึ
ีีก ีขีถีธึีธีท ีง ีดีกึีคีกีฎีซีถ ีกีฆีคีฅึีธึีฉีตีกีดีข ีบีกีตีดีกีถีกีพีธึีพีกีฎ ีฌีฅีผีถีกีตีซีถ ีฃีฅีฟีฅึีซีถึ</p>
${text}
<p>ิธีถีคีฐีกีถีธึึ ีกีผีดีกีดีข ีกึีฑีกีถีกีฃึีพีกีฎ ีง ีปึีซ ีธึีกีฏีซ ีกีถีฏีกีตีธึีถ ีพีซีณีกีฏ,
ีซีถีนีจ ีบีกีฐีกีถีปีธึีด ีง ีทีกึีธึีถีกีฏีกีฏีกีถ ีดีธีถีซีฉีธึีซีถีฃ ึ ีกีฒีขีตีธึึีถีฅึีซ ีฏีกีผีกีพีกึีดีกีถ ีดีซีปีธึีกีผีธึีดีถีฅึึ</p>`;
</script>

</body>
</html>

