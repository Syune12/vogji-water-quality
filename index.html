<!DOCTYPE html>
<html lang="hy">
<head>
<meta charset="UTF-8">
<title>ีีฒีปีซ ีฃีฅีฟีซ ีปึีซ ีธึีกีฏีซ ีคีกีฝีกีตีซีถ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; background:#f4f6f8; margin:0; }
header { background:#0b7285; color:white; padding:20px; text-align:center; }
section { background:white; margin:15px; padding:20px; border-radius:8px; }
h2 { color:#0b7285; }
#aiText { background:#eef6f7; padding:15px; border-left:5px solid #0b7285; }
</style>
</head>

<body>

<header>
<h1>ีีฒีปีซ ีฃีฅีฟีซ ีปึีซ ีธึีกีฏีซ ีคีกีฝีกีตีซีถ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</h1>
<p>ีีกีดีฅีดีกีฟีธึีฉีตีธึีถ ีี ีฃีฅีฟีฅึีซ ีงีฏีธีฌีธีฃีซีกีฏีกีถ ีคีกีฝีกีฏีกึีฃีดีกีถ ีฐีฅีฟ</p>
</header>

<section>
<h2>๐ ิดีกีฝีกีตีซีถ ีฃึีกึีซีฏ (ีญีถีคึีกีฐีกึีธึีตึ ีฟีกึึีฅึ)</h2>
<canvas id="chart" width="900" height="450"></canvas>
</section>

<section>
<h2>๐ค ิฑึีฐีฅีฝีฟีกีฏีกีถ ีขีกีถีกีฏีกีถีธึีฉีตีกีถ ีพีฅึีฌีธึีฎีธึีฉีตีธึีถ</h2>
<div id="aiText"></div>
</section>

<script>
// ===== ิฑีดีฝีกีฉีพีฅึ =====
const labels = ['05.01','07.01','08.01','09.01','12.01','13.01'];

// ===== ิปึีกีฏีกีถ ีฟีพีตีกีฌีถีฅึ =====
const data = {
  Fe: [9.053,0,0.181,0,0.146,0],
  Al: [2.740,0.009,0.131,0.236,0.244,0.046],
  Mn: [0.234,0.041,0.054,0.134,0.040,0.035],
  Mo: [0.342,0.218,0.222,1.315,0.264,0.114],
  Li: [0.096,0.073,0.074,0.413,0.055,0.019]
};

// ===== ิดีกีฝีกีตีซีถ ีทีฅีดีฅึ (ีี ีฃีฅีฟีฅึ) =====
const limits = {
  Fe: [0.031,0.062,0.5,1],
  Al: [0.03,0.06,0.12,5],
  Mn: [0.004,0.008,0.016,0.032],
  Mo: [0.015,0.03,0.06,0.12],
  Li: [0.005,0.01,0.02,0.04]
};

// ===== ิดีกีฝีซ ีฐีกีทีพีกึีฏ =====
function getClass(value, lim) {
  if (value <= lim[0]) return 1;
  if (value <= lim[1]) return 2;
  if (value <= lim[2]) return 3;
  if (value <= lim[3]) return 4;
  return 5;
}

// ===== ิดีกีฝีกีตีซีถ ีฟีพีตีกีฌีถีฅึ =====
const classData = {};
for (let el in data) {
  classData[el] = data[el].map(v => getClass(v, limits[el]));
}

// ===== ิณึีกึีซีฏ =====
new Chart(document.getElementById('chart'), {
  type: 'line',
  data: {
    labels,
    datasets: [
      { label:'Fe', data:classData.Fe, borderColor:'red', borderWidth:2 },
      { label:'Al', data:classData.Al, borderColor:'blue', borderWidth:2 },
      { label:'Mn', data:classData.Mn, borderColor:'green', borderWidth:2 },
      { label:'Mo', data:classData.Mo, borderColor:'purple', borderWidth:2 },
      { label:'Li', data:classData.Li, borderColor:'orange', borderWidth:2 }
    ]
  },
  options: {
    plugins: {
      tooltip: {
        callbacks: {
          label: ctx => {
            const el = ctx.dataset.label;
            const i = ctx.dataIndex;
            return `${el}: ${data[el][i]} ีดีฃ/ีฌ โ ิดีกีฝ ${ctx.raw}`;
          }
        }
      }
    },
    scales: {
      y: {
        min:1, max:5,
        ticks:{
          stepSize:1,
          callback:v=>['','I ีทีกีฟ ีฌีกีพ','II ีฌีกีพ','III ีขีกีพีกึีกึ','IV ีพีกีฟ','V ีทีกีฟ ีพีกีฟ'][v]
        },
        title:{display:true,text:'ีึีซ ีธึีกีฏีซ ีคีกีฝ'}
      }
    }
  }
});

// ===== ิฑิฒ ีิตีีีิฑีิปี ีิตีิผีีิพีีินีีีี =====
let text = `<strong>ิธีถีคีฐีกีถีธึึ ีฃีถีกีฐีกีฟีธึีด.</strong><br>`;
let problems = [];

for (let el in classData) {
  const maxClass = Math.max(...classData[el]);
  if (maxClass >= 4) {
    problems.push(`${el} (ีกีผีกีพีฅีฌีกีฃีธึีตีถีจี ${maxClass} ีคีกีฝ)`);
  }
}

text += problems.length
  ? `ีีฅีฟีกีฆีธีฟีพีกีฎ ีชีกีดีกีถีกีฏีกีฐีกีฟีพีกีฎีธึีด ีกีผีกีพีฅีฌ ีญีถีคึีกีฐีกึีธึีตึ ีฟีกึึีฅึีถ ีฅีถี <strong>${problems.join(', ')}</strong>ึ`
  : `ีีฟีกีถีฃีกีพีธึ ีฃีฅึีกีฆีกีถึีธึีดีถีฅึ ีนีฅีถ ีกึีฑีกีถีกีฃึีพีฅีฌึ`;

text += `<br><br><strong>ิตีฆึีกีฏีกึีธึีฉีตีธึีถ.</strong> ีีพีตีกีฌ ีชีกีดีกีถีกีฏีกีฐีกีฟีพีกีฎีธึีด ีีฒีปีซ ีฃีฅีฟีซ ีปึีซ ีธึีกีฏีจ ีดีซ ีทีกึึ ึึีฅึีซีถ ีคีกีฝีพีธึีด ีง <strong>IVโV (ีพีกีฟโีทีกีฟ ีพีกีฟ)</strong> ีคีกีฝีฅึีซ, ีซีถีนีจ ีพีฏีกีตีธึีด ีง ีดีกึีคีกีฎีซีถ ึ ีฅึีฏึีกีขีกีถีกีฏีกีถ ีกีฆีคีฅึีธึีฉีตีธึีถีถีฅึีซ ีฐีกีดีกีฏึีพีกีฎ ีกีฆีคีฅึีธึีฉีตีกีถ ีดีกีฝีซีถึ`;

document.getElementById('aiText').innerHTML = text;
</script>

</body>
</html>

